!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.VueI18n=e()}(this,function(){"use strict";function t(t,e){"undefined"!=typeof console&&(console.warn("[vue-i18n] "+t),e&&console.warn(e.stack))}function e(t){return null!==t&&"object"==typeof t}function n(t){return O.call(t)===N}function r(t){return null===t||void 0===t}function a(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];var r=null,a=null;return 1===t.length?e(t[0])||Array.isArray(t[0])?a=t[0]:"string"==typeof t[0]&&(r=t[0]):2===t.length&&("string"==typeof t[0]&&(r=t[0]),(e(t[1])||Array.isArray(t[1]))&&(a=t[1])),{locale:r,params:a}}function i(t){return t?t>1?1:0:1}function o(t,e){return t=Math.abs(t),2===e?i(t):t?Math.min(t,2):0}function s(t,e){if(!t&&"string"!=typeof t)return null;var n=t.split("|");return e=o(e,n.length),n[e]?n[e].trim():t}function l(t){return JSON.parse(JSON.stringify(t))}function c(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}function u(t,e){return C.call(t,e)}function f(t){for(var n=arguments,r=Object(t),a=1;a<arguments.length;a++){var i=n[a];if(void 0!==i&&null!==i){var o=void 0;for(o in i)u(i,o)&&(e(i[o])?r[o]=f(r[o],i[o]):r[o]=i[o])}}return r}function h(t,n){if(t===n)return!0;var r=e(t),a=e(n);if(!r||!a)return!r&&!a&&String(t)===String(n);try{var i=Array.isArray(t),o=Array.isArray(n);if(i&&o)return t.length===n.length&&t.every(function(t,e){return h(t,n[e])});if(i||o)return!1;var s=Object.keys(t),l=Object.keys(n);return s.length===l.length&&s.every(function(e){return h(t[e],n[e])})}catch(t){return!1}}function p(t){t.prototype.$t=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=this.$i18n;return r._t.apply(r,[t,r.locale,r._getMessages(),this].concat(e))},t.prototype.$tc=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];var a=this.$i18n;return a._tc.apply(a,[t,a.locale,a._getMessages(),this,e].concat(n))},t.prototype.$te=function(t,e){var n=this.$i18n;return n._te(t,n.locale,n._getMessages(),e)},t.prototype.$d=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return(r=this.$i18n).d.apply(r,[t].concat(e));var r},t.prototype.$n=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return(r=this.$i18n).n.apply(r,[t].concat(e));var r}}function m(t,e,n){v(t,n)&&y(t,e,n)}function _(t,e,n,r){v(t,n)&&(g(t,n)&&h(e.value,e.oldValue)||y(t,e,n))}function v(e,n){var r=n.context;return r?!!r.$i18n||(t("not exist VueI18n instance in Vue instance"),!1):(t("not exist Vue instance in VNode context"),!1)}function g(t,e){var n=e.context;return t._locale===n.$i18n.locale}function y(e,n,r){var a=d(n.value),i=a.path,o=a.locale,s=a.args;if(i||o||s)if(i){var l=r.context;e._vt=e.textContent=(c=l.$i18n).t.apply(c,[i].concat(b(o,s))),e._locale=l.$i18n.locale;var c}else t("required `path` in v-t directive");else t("not support value type")}function d(t){var e,r,a;return"string"==typeof t?e=t:n(t)&&(e=t.path,r=t.locale,a=t.args),{path:e,locale:r,args:a}}function b(t,e){var r=[];return t&&r.push(t),e&&(Array.isArray(e)||n(e))&&r.push(e),r}function k(e){var n=(A=e).version&&Number(A.version.split(".")[0])||-1;if(k.installed)t("already installed.");else if(k.installed=!0,n<2)t("vue-i18n ("+k.version+") need to use Vue 2.0 or later (Vue: "+A.version+").");else{Object.defineProperty(A.prototype,"$i18n",{get:function(){return this._i18n}}),p(A),A.mixin(I),A.directive("t",{bind:m,update:_}),A.component(V.name,V);var r=A.config.optionMergeStrategies;r.i18n=r.methods}}function F(t){for(var e=[],n=0,r="";n<t.length;){var a=t[n++];if("{"===a){r&&e.push({type:"text",value:r}),r="";var i="";for(a=t[n++];"}"!==a;)i+=a,a=t[n++];var o=E.test(i)?"list":R.test(i)?"named":"unknown";e.push({value:i,type:o})}else"%"===a?"{"!==t[n]&&(r+=a):r+=a}return r&&e.push({type:"text",value:r}),e}function w(n,r){var a=[],i=0,o=Array.isArray(r)?"list":e(r)?"named":"unknown";if("unknown"===o)return a;for(;i<n.length;){var s=n[i];switch(s.type){case"text":a.push(s.value);break;case"list":a.push(r[parseInt(s.value,10)]);break;case"named":"named"===o?a.push(r[s.value]):t("Type of token '"+s.type+"' and format of value '"+o+"' don't match!");break;case"unknown":t("Detect 'unknown' type of token!")}i++}return a}function $(t){return Y.test(t)}function T(t){var e=t.charCodeAt(0);return e!==t.charCodeAt(t.length-1)||34!==e&&39!==e?t:t.slice(1,-1)}function D(t){if(void 0===t||null===t)return"eof";var e=t.charCodeAt(0);switch(e){case 91:case 93:case 46:case 34:case 39:case 48:return t;case 95:case 36:case 45:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return e>=97&&e<=122||e>=65&&e<=90?"ident":e>=49&&e<=57?"number":"else"}function x(t){var e=t.trim();return("0"!==t.charAt(0)||!isNaN(t))&&($(e)?T(e):"*"+e)}function L(t){var e,n,r,a,i,o,s,l=[],c=-1,u=q,f=0,h=[];for(h[z]=function(){void 0!==n&&(l.push(n),n=void 0)},h[P]=function(){void 0===n?n=r:n+=r},h[U]=function(){h[P](),f++},h[J]=function(){if(f>0)f--,u=B,h[P]();else{if(f=0,!1===(n=x(n)))return!1;h[z]()}};null!==u;)if(c++,"\\"!==(e=t[c])||!function(){var e=t[c+1];if(u===G&&"'"===e||u===H&&'"'===e)return c++,r="\\"+e,h[P](),!0}()){if(a=D(e),s=X[u],(i=s[a]||s.else||Q)===Q)return;if(u=i[0],(o=h[i[1]])&&(r=i[2],r=void 0===r?e:r,!1===o()))return;if(u===K)return l}}function W(t){return!!Array.isArray(t)&&0===t.length}var A,O=Object.prototype.toString,N="[object Object]",C=Object.prototype.hasOwnProperty,M="undefined"!=typeof Intl&&void 0!==Intl.DateTimeFormat,j="undefined"!=typeof Intl&&void 0!==Intl.NumberFormat,I={beforeCreate:function(){var e=this.$options;if(e.i18n=e.i18n||(e.__i18n?{}:null),e.i18n)if(e.i18n instanceof tt){if(e.__i18n)try{var r={};e.__i18n.forEach(function(t){r=f(r,JSON.parse(t))}),Object.keys(r).forEach(function(t){e.i18n.mergeLocaleMessage(t,r[t])})}catch(e){t("Cannot parse locale messages via custom blocks.",e)}this._i18n=e.i18n,this._i18nWatcher=this._i18n.watchI18nData(),this._i18n.subscribeDataChanging(this),this._subscribing=!0}else if(n(e.i18n)){if(this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof tt&&(e.i18n.root=this.$root.$i18n,e.i18n.fallbackLocale=this.$root.$i18n.fallbackLocale,e.i18n.silentTranslationWarn=this.$root.$i18n.silentTranslationWarn),e.__i18n)try{var a={};e.__i18n.forEach(function(t){a=f(a,JSON.parse(t))}),e.i18n.messages=a}catch(e){t("Cannot parse locale messages via custom blocks.",e)}this._i18n=new tt(e.i18n),this._i18nWatcher=this._i18n.watchI18nData(),this._i18n.subscribeDataChanging(this),this._subscribing=!0,(void 0===e.i18n.sync||e.i18n.sync)&&(this._localeWatcher=this.$i18n.watchLocale())}else t("Cannot be interpreted 'i18n' option.");else this.$root&&this.$root.$i18n&&this.$root.$i18n instanceof tt?(this._i18n=this.$root.$i18n,this._i18n.subscribeDataChanging(this),this._subscribing=!0):e.parent&&e.parent.$i18n&&e.parent.$i18n instanceof tt&&(this._i18n=e.parent.$i18n,this._i18n.subscribeDataChanging(this),this._subscribing=!0)},beforeDestroy:function(){this._i18n&&(this._subscribing&&(this._i18n.unsubscribeDataChanging(this),delete this._subscribing),this._i18nWatcher&&(this._i18nWatcher(),delete this._i18nWatcher),this._localeWatcher&&(this._localeWatcher(),delete this._localeWatcher),this._i18n=null)}},V={name:"i18n",functional:!0,props:{tag:{type:String,default:"span"},path:{type:String,required:!0},locale:{type:String},places:{type:[Array,Object]}},render:function(e,n){var r=n.props,a=n.data,i=n.children,o=n.parent.$i18n;if(i=(i||[]).filter(function(t){return t.tag||(t.text=t.text.trim())}),!o)return t("Cannot find VueI18n instance!"),i;var s=r.path,l=r.locale,c={},u=r.places||{},f=Array.isArray(u)?u.length>0:Object.keys(u).length>0,h=i.every(function(t){if(t.data&&t.data.attrs){var e=t.data.attrs.place;return void 0!==e&&""!==e}});return f&&i.length>0&&!h&&t("If places prop is set, all child elements must have place prop set."),Array.isArray(u)?u.forEach(function(t,e){c[e]=t}):Object.keys(u).forEach(function(t){c[t]=u[t]}),i.forEach(function(t,e){var n=h?""+t.data.attrs.place:""+e;c[n]=t}),e(r.tag,a,o.i(s,l,c))}},S=function(){this._caches=Object.create(null)};S.prototype.interpolate=function(t,e){var n=this._caches[t];return n||(n=F(t),this._caches[t]=n),w(n,e)};var E=/^(\d)+/,R=/^(\w)+/,P=0,z=1,U=2,J=3,q=0,B=4,G=5,H=6,K=7,Q=8,X=[];X[q]={ws:[q],ident:[3,P],"[":[B],eof:[K]},X[1]={ws:[1],".":[2],"[":[B],eof:[K]},X[2]={ws:[2],ident:[3,P],0:[3,P],number:[3,P]},X[3]={ident:[3,P],0:[3,P],number:[3,P],ws:[1,z],".":[2,z],"[":[B,z],eof:[K,z]},X[B]={"'":[G,P],'"':[H,P],"[":[B,U],"]":[1,J],eof:Q,else:[B,P]},X[G]={"'":[B,P],eof:Q,else:[G,P]},X[H]={'"':[B,P],eof:Q,else:[H,P]};var Y=/^\s?(true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/,Z=function(){this._cache=Object.create(null)};Z.prototype.parsePath=function(t){var e=this._cache[t];return e||(e=L(t))&&(this._cache[t]=e),e||[]},Z.prototype.getPathValue=function(t,n){if(!e(t))return null;var r=this.parsePath(n);if(W(r))return null;for(var a=r.length,i=t,o=0;o<a;){var s=i[r[o]];if(void 0===s){i=null;break}i=s,o++}return i};var tt=function(t){var e=this;void 0===t&&(t={});var n=t.locale||"en-US",a=t.fallbackLocale||"en-US",i=t.messages||{},o=t.dateTimeFormats||{},s=t.numberFormats||{};this._vm=null,this._formatter=t.formatter||new S,this._missing=t.missing||null,this._root=t.root||null,this._sync=void 0===t.sync||!!t.sync,this._fallbackRoot=void 0===t.fallbackRoot||!!t.fallbackRoot,this._silentTranslationWarn=void 0!==t.silentTranslationWarn&&!!t.silentTranslationWarn,this._dateTimeFormatters={},this._numberFormatters={},this._path=new Z,this._dataListeners=[],this._exist=function(t,n){return!(!t||!n)&&!r(e._path.getPathValue(t,n))},this._initVM({locale:n,fallbackLocale:a,messages:i,dateTimeFormats:o,numberFormats:s})},et={vm:{},messages:{},dateTimeFormats:{},numberFormats:{},locale:{},fallbackLocale:{},missing:{},formatter:{},silentTranslationWarn:{}};return tt.prototype._initVM=function(t){var e=A.config.silent;A.config.silent=!0,this._vm=new A({data:t}),A.config.silent=e},tt.prototype.subscribeDataChanging=function(t){this._dataListeners.push(t)},tt.prototype.unsubscribeDataChanging=function(t){c(this._dataListeners,t)},tt.prototype.watchI18nData=function(){var t=this;return this._vm.$watch("$data",function(){for(var e=t._dataListeners.length;e--;)A.nextTick(function(){t._dataListeners[e]&&t._dataListeners[e].$forceUpdate()})},{deep:!0})},tt.prototype.watchLocale=function(){if(!this._sync||!this._root)return null;var t=this._vm;return this._root.vm.$watch("locale",function(e){t.$set(t,"locale",e),t.$forceUpdate()},{immediate:!0})},et.vm.get=function(){return this._vm},et.messages.get=function(){return l(this._getMessages())},et.dateTimeFormats.get=function(){return l(this._getDateTimeFormats())},et.numberFormats.get=function(){return l(this._getNumberFormats())},et.locale.get=function(){return this._vm.locale},et.locale.set=function(t){this._vm.$set(this._vm,"locale",t)},et.fallbackLocale.get=function(){return this._vm.fallbackLocale},et.fallbackLocale.set=function(t){this._vm.$set(this._vm,"fallbackLocale",t)},et.missing.get=function(){return this._missing},et.missing.set=function(t){this._missing=t},et.formatter.get=function(){return this._formatter},et.formatter.set=function(t){this._formatter=t},et.silentTranslationWarn.get=function(){return this._silentTranslationWarn},et.silentTranslationWarn.set=function(t){this._silentTranslationWarn=t},tt.prototype._getMessages=function(){return this._vm.messages},tt.prototype._getDateTimeFormats=function(){return this._vm.dateTimeFormats},tt.prototype._getNumberFormats=function(){return this._vm.numberFormats},tt.prototype._warnDefault=function(e,n,a,i){return r(a)?(this.missing?this.missing.apply(null,[e,n,i]):this._silentTranslationWarn||t("Cannot translate the value of keypath '"+n+"'. Use the value of keypath as default."),n):a},tt.prototype._isFallbackRoot=function(t){return!t&&!r(this._root)&&this._fallbackRoot},tt.prototype._interpolate=function(e,a,i,o,s,l){if(!a)return null;var c=this._path.getPathValue(a,i);if(Array.isArray(c))return c;var u;if(r(c)){if(!n(a))return null;if("string"!=typeof(u=a[i]))return this._silentTranslationWarn||t("Value of key '"+i+"' is not a string!"),null}else{if("string"!=typeof c)return this._silentTranslationWarn||t("Value of key '"+i+"' is not a string!"),null;u=c}return u.indexOf("@:")>=0&&(u=this._link(e,a,u,o,s,l)),l?this._render(u,s,l):u},tt.prototype._link=function(e,n,r,a,i,o){var s=this,l=r,c=l.match(/(@:[\w\-_|.]+)/g);for(var u in c)if(c.hasOwnProperty(u)){var f=c[u],h=f.substr(2),p=s._interpolate(e,n,h,a,"raw"===i?"string":i,"raw"===i?void 0:o);if(s._isFallbackRoot(p)){if(s._silentTranslationWarn||t("Fall back to translate the link placeholder '"+h+"' with root locale."),!s._root)throw Error("unexpected error");var m=s._root;p=m._translate(m._getMessages(),m.locale,m.fallbackLocale,h,a,i,o)}l=(p=s._warnDefault(e,h,p,a))?l.replace(f,p):l}return l},tt.prototype._render=function(t,e,n){var r=this._formatter.interpolate(t,n);return"string"===e?r.join(""):r},tt.prototype._translate=function(e,n,a,i,o,s,l){var c=this._interpolate(n,e[n],i,o,s,l);return r(c)?(c=this._interpolate(a,e[a],i,o,s,l),r(c)?null:(this._silentTranslationWarn||t("Fall back to translate the keypath '"+i+"' with '"+a+"' locale."),c)):c},tt.prototype._t=function(e,n,r,i){for(var o=[],s=arguments.length-4;s-- >0;)o[s]=arguments[s+4];if(!e)return"";var l=a.apply(void 0,o),c=l.locale||n,u=this._translate(r,c,this.fallbackLocale,e,i,"string",l.params);if(this._isFallbackRoot(u)){if(this._silentTranslationWarn||t("Fall back to translate the keypath '"+e+"' with root locale."),!this._root)throw Error("unexpected error");return(f=this._root).t.apply(f,[e].concat(o))}return this._warnDefault(c,e,u,i);var f},tt.prototype.t=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return(r=this)._t.apply(r,[t,this.locale,this._getMessages(),null].concat(e));var r},tt.prototype._i=function(e,n,r,a,i){var o=this._translate(r,n,this.fallbackLocale,e,a,"raw",i);if(this._isFallbackRoot(o)){if(this._silentTranslationWarn||t("Fall back to interpolate the keypath '"+e+"' with root locale."),!this._root)throw Error("unexpected error");return this._root.i(e,n,i)}return this._warnDefault(n,e,o,a)},tt.prototype.i=function(t,e,n){return t?("string"!=typeof e&&(e=this.locale),this._i(t,e,this._getMessages(),null,n)):""},tt.prototype._tc=function(t,e,n,r,a){for(var i=[],o=arguments.length-5;o-- >0;)i[o]=arguments[o+5];return t?(void 0===a&&(a=1),s((l=this)._t.apply(l,[t,e,n,r].concat(i)),a)):"";var l},tt.prototype.tc=function(t,e){for(var n=[],r=arguments.length-2;r-- >0;)n[r]=arguments[r+2];return(a=this)._tc.apply(a,[t,this.locale,this._getMessages(),null,e].concat(n));var a},tt.prototype._te=function(t,e,n){for(var r=[],i=arguments.length-3;i-- >0;)r[i]=arguments[i+3];var o=a.apply(void 0,r).locale||e;return this._exist(n[o],t)},tt.prototype.te=function(t,e){return this._te(t,this.locale,this._getMessages(),e)},tt.prototype.getLocaleMessage=function(t){return l(this._vm.messages[t]||{})},tt.prototype.setLocaleMessage=function(t,e){this._vm.messages[t]=e},tt.prototype.mergeLocaleMessage=function(t,e){this._vm.messages[t]=A.util.extend(this._vm.messages[t]||{},e)},tt.prototype.getDateTimeFormat=function(t){return l(this._vm.dateTimeFormats[t]||{})},tt.prototype.setDateTimeFormat=function(t,e){this._vm.dateTimeFormats[t]=e},tt.prototype.mergeDateTimeFormat=function(t,e){this._vm.dateTimeFormats[t]=A.util.extend(this._vm.dateTimeFormats[t]||{},e)},tt.prototype._localizeDateTime=function(e,n,a,i,o){var s=n,l=i[s];if((r(l)||r(l[o]))&&(t("Fall back to '"+a+"' datetime formats from '"+n+" datetime formats."),l=i[s=a]),r(l)||r(l[o]))return null;var c=l[o],u=s+"__"+o,f=this._dateTimeFormatters[u];return f||(f=this._dateTimeFormatters[u]=new Intl.DateTimeFormat(s,c)),f.format(e)},tt.prototype._d=function(e,n,r){if(!tt.availabilities.dateTimeFormat)return t("Cannot format a Date value due to not support Intl.DateTimeFormat."),"";if(!r)return new Intl.DateTimeFormat(n).format(e);var a=this._localizeDateTime(e,n,this.fallbackLocale,this._getDateTimeFormats(),r);if(this._isFallbackRoot(a)){if(t("Fall back to datetime localization of root: key '"+r+"' ."),!this._root)throw Error("unexpected error");return this._root.d(e,r,n)}return a||""},tt.prototype.d=function(t){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];var a=this.locale,i=null;return 1===n.length?"string"==typeof n[0]?i=n[0]:e(n[0])&&(n[0].locale&&(a=n[0].locale),n[0].key&&(i=n[0].key)):2===n.length&&("string"==typeof n[0]&&(i=n[0]),"string"==typeof n[1]&&(a=n[1])),this._d(t,a,i)},tt.prototype.getNumberFormat=function(t){return l(this._vm.numberFormats[t]||{})},tt.prototype.setNumberFormat=function(t,e){this._vm.numberFormats[t]=e},tt.prototype.mergeNumberFormat=function(t,e){this._vm.numberFormats[t]=A.util.extend(this._vm.numberFormats[t]||{},e)},tt.prototype._localizeNumber=function(e,n,a,i,o){var s=n,l=i[s];if((r(l)||r(l[o]))&&(t("Fall back to '"+a+"' number formats from '"+n+" number formats."),l=i[s=a]),r(l)||r(l[o]))return null;var c=l[o],u=s+"__"+o,f=this._numberFormatters[u];return f||(f=this._numberFormatters[u]=new Intl.NumberFormat(s,c)),f.format(e)},tt.prototype._n=function(e,n,r){if(!tt.availabilities.numberFormat)return t("Cannot format a Date value due to not support Intl.NumberFormat."),"";if(!r)return new Intl.NumberFormat(n).format(e);var a=this._localizeNumber(e,n,this.fallbackLocale,this._getNumberFormats(),r);if(this._isFallbackRoot(a)){if(t("Fall back to number localization of root: key '"+r+"' ."),!this._root)throw Error("unexpected error");return this._root.n(e,r,n)}return a||""},tt.prototype.n=function(t){for(var n=[],r=arguments.length-1;r-- >0;)n[r]=arguments[r+1];var a=this.locale,i=null;return 1===n.length?"string"==typeof n[0]?i=n[0]:e(n[0])&&(n[0].locale&&(a=n[0].locale),n[0].key&&(i=n[0].key)):2===n.length&&("string"==typeof n[0]&&(i=n[0]),"string"==typeof n[1]&&(a=n[1])),this._n(t,a,i)},Object.defineProperties(tt.prototype,et),tt.availabilities={dateTimeFormat:M,numberFormat:j},tt.install=k,tt.version="7.3.2","undefined"!=typeof window&&window.Vue&&window.Vue.use(tt),tt});